<div class="task-form-container">
  <h1>{{ isEditMode ? 'Редактирование задачи' : 'Создание новой задачи' }}</h1>

  <mat-card>
    <mat-card-content>
      <form [formGroup]="taskForm" (ngSubmit)="onSubmit()">
        <!-- Название задачи -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Название задачи</mat-label>
          <input matInput formControlName="title" placeholder="Введите название задачи">
          @if (submitAttempted && taskForm.get('title')?.invalid) {
            <mat-error>
              {{ getErrorMessage('title') }}
            </mat-error>
          }
        </mat-form-field>

        <!-- Описание задачи -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Описание задачи</mat-label>
          <textarea matInput formControlName="description" rows="5" placeholder="Введите описание задачи"></textarea>
          @if (submitAttempted && taskForm.get('description')?.invalid) {
            <mat-error>
              {{ getErrorMessage('description') }}
            </mat-error>
          }
        </mat-form-field>

        <!-- Сложность -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Сложность</mat-label>
          <mat-select formControlName="difficulty">
            <mat-option value="easy">Легкая</mat-option>
            <mat-option value="medium">Средняя</mat-option>
            <mat-option value="hard">Сложная</mat-option>
          </mat-select>
          @if (submitAttempted && taskForm.get('difficulty')?.invalid) {
            <mat-error>
              {{ getErrorMessage('difficulty') }}
            </mat-error>
          }
        </mat-form-field>

        <!-- Пример входных данных -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Пример входных данных</mat-label>
          <textarea matInput formControlName="inputExample" rows="3" placeholder="Введите пример входных данных"></textarea>
          @if (submitAttempted && taskForm.get('inputExample')?.invalid) {
            <mat-error>
              {{ getErrorMessage('inputExample') }}
            </mat-error>
          }
        </mat-form-field>

        <!-- Пример выходных данных -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Пример выходных данных</mat-label>
          <textarea matInput formControlName="outputExample" rows="3" placeholder="Введите пример выходных данных"></textarea>
          @if (submitAttempted && taskForm.get('outputExample')?.invalid) {
            <mat-error>
              {{ getErrorMessage('outputExample') }}
            </mat-error>
          }
        </mat-form-field>

        <!-- Теги -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Теги</mat-label>
          <mat-select formControlName="tags" multiple>
            @for (tag of tags; track tag.id) {
              <mat-option [value]="tag.id">{{ tag.name }}</mat-option>
            }
          </mat-select>
          @if (submitAttempted && taskForm.get('tags')?.invalid) {
            <mat-error>
              {{ getErrorMessage('tags') }}
            </mat-error>
          }
        </mat-form-field>

        <!-- Кнопки действий -->
        <div class="form-actions">
          <button mat-button type="button" routerLink="/tasks">Отмена</button>
          <button mat-raised-button color="primary" type="submit">{{ isEditMode ? 'Обновить' : 'Создать' }}</button>
        </div>
      </form>
    </mat-card-content>
  </mat-card>
</div>